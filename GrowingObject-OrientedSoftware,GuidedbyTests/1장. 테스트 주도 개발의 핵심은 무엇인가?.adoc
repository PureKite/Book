= 테스트 주도 개발의 핵심은 무엇인가?

.1. 학습 과정으로서의 소프트웨어 개발
- 프로젝트가 성공을 거두려면 거기에 관련된 사람들이 달성해야 할 바가 무엇인지를 이해하고 그 과정에서 잘못 이해하고 있는 바를 식별하고 해결하고자 협업해야 함
- 불확실한 변화를 예측하려면 경험이 늘어남에 따라 불확실성을 해결하는 데 도움이 될 프로세스가 필요

.2. 피드백은 가장 기본적인 도구다
- 팀에서 취할 수 있는 가장 좋은 접근법
** 경험에 의거한 피드백을 이용해 시스템과 그 용도에 관해 배움
** 그렇게 배운 바를 다시 시스템에 적용
- 팀에는 반복적인 활동 주기가 필요
** 각 주기마다 새로운 기능을 추가하고 이미 완료한 작업의 양과 질에 관한 피드백을 받기
** 팀원들은 작업에 타임 박스로 나누고, 이 안에서 되도록 많은 기능을 분석, 설계, 구현, 배포
- 완료된 작업을 각 주기마다 특정 종류의 환경에 배포하는 일은 아주 중요
** 배포할 때마다 팀원들은 현실에서 자신이 내린 가정을 검사할 기회가 생김
** 실제 진행 상황을 측정하고, 오류를 탐지하고 수정하며, 지금까지 배운 바에 따라 현재 계획을 조정
** 배포하지 않고는 피드백이 완전해지지 않음
- 점진적이고 반복적인 개발

.3. 변화를 돕는 실천법
- 회귀 오류를 잡아줄 꾸준한 테스트가 필요
** 기존 기능을 망가뜨리지 않고도 새 기능을 추가할 수 있음
** 시스템 규모와 상관없이 수동 테스트를 자주 하는 것은 비실용적
** 구축과 배포, 시스템 버전 변경에 드는 비용을 줄이려면 되도록 테스트를 자동화해야 함
- 코드를 가능한 단순하게 유지해야 함
** 코드를 이해하고 수정하기가 더 쉬움
*** 개발자들은 코드를 작성하는 것보다 코드를 읽는 데 훨씬 더 많은 시간을 보내므로 거기에 맞게 최적화
** 코드 설계를 개선하고 단순화하고, 중복을 제거하며, 코드가 명확하게 자신의 역할을 표현하게끔 코드를 사용할 때마다 리팩터링
- 테스트 주도 개발을 한다면?
** 테스트를 먼저 작성하려는 노력으로 설계 아이디어의 푸질에 관한 피드백도 빠르게 얻을 수 있음
- 개발 과정 내내 테스트를 작성한다면 변경에 대한 자시간을 주는 자동화된 회귀 테스트라는 안정망을 구축할 수 있음

.4. 테스트 주도 개발 간단 정리
- TDD 핵심 주기
** 실패하는 단위 테스트 작성
** 테스트 통과시키기
** 리팩터링
- 테스트 작성으로 얻는 피드백
** 다음 작업에 대한 인수 조건이 명확해짐. 작업이 끝나는 시점을 파악할 방법을 스스로 알아내야 하기 때문(설계)
** 느슨하게 결합된 구성 요소를 작성할 수 있게 되어 격리된 상태에서, 더 높은 수준으로, 모두 결합된 상태로 구성 요소를 손쉽게 테스트할 수 있음(설계)
** 코드가 하는 일에 대한 실행 가능한 설명이 더해짐(설계)
** 완전한 회귀 스위트가 늘어남(구현)
- 테스트 실행으로 얻는 피드백
** 콘텍스트를 선명하게 인지하는 동안 오류를 탐지(구현)
** 언제 작업이 충분히 완료됐는지 알게 되어 '금도금'하듯 과도한 최적화를 하거나 불필요한 기능을 더하지 않게 됨(설계)
- TDD의 황금률
** 실패하는 테스트 없이는 새 기능을 작성하지 마라

.5. 좀 더 큰 그림
- 인수 테스트를 작성하는 것으로 시작
** 인수 테스트? 만들고자 하는 기능을 시험하는 테스트
** 인수 테스트가 실패하는 동안 시스템이 아직까지 그 기능을 구현하지 않았다는 사실을 보여줌
- 인수 테스트가 통과하면 작업 끝
- 인수 테스트 하에서 단위 수준의 테스트/구현/리팩터링 주기를 따라 기능 개발
- 바깥쪽 테스트 고리
** 진척도를 측정하는 수단
** 테스트 스위트가 증가하면 시스템을 변경할 때 회귀 실패에서 보호받을 수 있음
- 안쪽 고리
** 단위 테스트는 코드 품질을 유지하는데 도움
** 실패하는 단위 테스트는 소스 저장소에 절대 커밋해서는 안 됨

.6. 전 구간 테스트
- 인수 테스트에서는 시스템 내부 코드를 가능한 직접 호출하지 말고 시스템 전 구간을 시험해야 함
- 전 구간 테스트(end-to-end test)는 외부에서 유입되는 시스템하고만 상호작용

.7. 테스트의 수준
- 테스트의 계층 구조
** 인수 테스트 : 전체 시스템이 동작하는가?
** 통합 테스트 : 변경할 수 없는 코드를 대상으로 코드가 동작하는가?
** 단위 테스트 : 객체가 제대로 동작하는가? 객체를 이용하기가 편리한가?
- 인수 테스트, 통합 테스트 기법은 관련 기술이나 조직 문화에 좌우
- 단위 테스트 기법은 프로그래밍 스타일에 따라 달라지며, 객체 지향을 취하는 모든 시스템에 공통으로 적용

.8. 외부 품질과 내부 품질
- 외부 품질 : 시스템이 고객과 사용자의 요구를 얼마나 잘 충족하는가(기능, 신뢰성, 가용성, 응답성 등)
** 전 구간 테스트를 실행하면 외부 품질을 알 수 있음. 내부 품질은 알 수 없음
- 내부 품질 : 시스템이 개발자와 관리자의 요구를 얼마나 잘 충족하는가(이해하기 쉬운가, 변경하기 쉬운가 등)
** 단위 테스트를 작성하면 코드 품질에 관한 피드백을 얻을 수 있음. 외부 품질을 확신할 수 없음

.8. 외부 품질과 내부 품질